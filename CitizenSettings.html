<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Barangay Market Area Health Information Hub</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="./CitizenSettingstailwind.css" />
    <link rel="website icon" href="BMA.png" />
  </head>
  <body class="bg-gray-100 text-gray-800 leading-relaxed font-sans">
    <header>
      <div id="brand">
        <img src="BMA.png" alt="" class="logo" /><a
          href="#top"
          class="brand-text"
        ></a>
      </div>
      <nav>
        <ul class="nav-list">
          <li><a href="Home.html">Home</a></li>
          <li><a href="AvailableMedicine.html">Available Medicine</a></li>
          <li><a href="AppointmentForm.html">Appointment Booking</a></li>
          <li><a href="AppointmentHistory.html">Appointment History</a></li>
          <li><a href="#top">Settings</a></li>
        </ul>
      </nav>
      <div id="hamburger-icon" onclick="toggleMobileMenu(this)">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </div>
      <ul class="mobile-menu">
        <li><a href="Home.html">Home</a></li>
        <li><a href="AvailableMedicine.html">Available Medicine</a></li>
        <li><a href="AppointmentForm.html">Appointment Booking</a></li>
        <li><a href="AppointmentHistory.html">Appointment History</a></li>
        <li><a href="#top">Settings</a></li>
      </ul>
    </header>

    <div class="max-w-4xl mx-auto mt-20 mb-8 p-5 bg-white rounded-lg shadow-lg">
      <h1
        class="flex items-center justify-center gap-4 mb-8 text-[36px] font-extrabold text-gray-800"
        style="font-family: Verdana"
      >
        <i class="fas fa-cog text-5xl text-olive"></i>
        Account Settings
      </h1>

      <!-- Change Username Section -->
      <div class="mb-8 p-5 rounded-lg bg-gray-50 border-l-4 border-olive">
        <h2 class="mb-4 text-gray-800 text-xl flex items-center">
          <i class="fas fa-user mr-3" style="color: #6a7337"></i>
          Change Username
        </h2>
        <form id="usernameForm">
          <div class="mb-4">
            <label
              for="currentUsername"
              class="block mb-1 font-medium text-gray-600"
              >Current Username</label
            >
            <input
              type="text"
              id="currentUsername"
              value="Matt Clyde Cabral"
              readonly
              class="w-full p-3 border border-gray-300 rounded text-base transition-colors duration-300 focus:outline-none focus:border-olive bg-gray-100"
            />
          </div>
          <div class="mb-4">
            <label
              for="newUsername"
              class="block mb-1 font-medium text-gray-600"
              >New Username</label
            >
            <input
              type="text"
              id="newUsername"
              placeholder="Enter new username"
              required
              class="w-full p-3 border border-gray-300 rounded text-base transition-colors duration-300 focus:outline-none focus:border-olive"
            />
            <p class="mt-1 text-sm text-gray-500 italic">
              * Must include at least 1 capital letter<br />
              * Must include at least 1 number
            </p>
          </div>
          <button
            type="submit"
            style="background-color: #6a7337"
            onmouseover="this.style.backgroundColor='#5c652f'"
            onmouseout="this.style.backgroundColor='#6A7337'"
            class="inline-block py-3 px-5 text-white border-none rounded cursor-pointer text-base transition-colors duration-300"
          >
            Update Username
          </button>
          <div
            id="usernameSuccess"
            class="hidden mt-3 p-3 bg-green-500 text-white rounded text-center animate-pulse"
          >
            Username updated successfully!
          </div>
        </form>
      </div>

      <!-- Change Password Section -->
      <div class="mb-8 p-5 rounded-lg bg-gray-50 border-l-4 border-olive">
        <h2 class="mb-4 text-gray-800 text-xl flex items-center">
          <i class="fas fa-lock mr-3" style="color: #6a7337"></i>
          Change Password
        </h2>
        <form id="passwordForm">
          <div class="mb-4">
            <label
              for="currentPassword"
              class="block mb-1 font-medium text-gray-600"
              >Current Password</label
            >
            <input
              type="password"
              id="currentPassword"
              placeholder="Enter current password"
              required
              class="w-full p-3 border border-gray-300 rounded text-base transition-colors duration-300 focus:outline-none focus:border-olive"
            />
          </div>
          <div class="mb-4">
            <label
              for="newPassword"
              class="block mb-1 font-medium text-gray-600"
              >New Password</label
            >
            <input
              type="password"
              id="newPassword"
              placeholder="Enter new password"
              required
              class="w-full p-3 border border-gray-300 rounded text-base transition-colors duration-300 focus:outline-none focus:border-olive"
            />
            <p class="mt-1 text-sm text-gray-500 italic">
              * Password must be at least 8 characters long<br />
              * Must include at least 1 number<br />
              * Must include at least 1 special character (e.g., .,?!{})
            </p>
          </div>
          <div class="mb-4">
            <label
              for="confirmPassword"
              class="block mb-1 font-medium text-gray-600"
              >Confirm New Password</label
            >
            <input
              type="password"
              id="confirmPassword"
              placeholder="Confirm new password"
              required
              class="w-full p-3 border border-gray-300 rounded text-base transition-colors duration-300 focus:outline-none focus:border-olive"
            />
          </div>
          <button
            type="submit"
            style="background-color: #6a7337"
            onmouseover="this.style.backgroundColor='#5c652f'"
            onmouseout="this.style.backgroundColor='#6A7337'"
            class="inline-block py-3 px-5 text-white border-none rounded cursor-pointer text-base transition-colors duration-300"
          >
            Update Password
          </button>
          <div
            id="passwordSuccess"
            class="hidden mt-3 p-3 bg-green-500 text-white rounded text-center animate-pulse"
          >
            Password updated successfully!
          </div>
        </form>
      </div>

      <!-- Logout Section -->
      <div class="flex justify-end mt-10">
        <button
          id="logoutBtn"
          class="inline-block py-3 px-5 bg-red-500 text-white border-none rounded cursor-pointer text-base transition-colors duration-300 hover:bg-red-600"
        >
          <i class="fas fa-sign-out-alt mr-2"></i> Logout
        </button>
      </div>
    </div>

    <!-- Logout Confirmation Modal -->
    <div
      id="logoutModal"
      class="hidden fixed inset-0 bg-black/70 bg-opacity-50 z-50 flex justify-center items-center animate-fade-in"
    >
      <div
        class="bg-white p-8 rounded-lg max-w-md w-11/12 text-center shadow-2xl animate-slide-up"
      >
        <i
          class="fa-solid fa-circle-exclamation text-4xl text-yellow-500 mb-4 block text-center"
        ></i>
        <h3 class="mb-3 text-xl text-gray-800 font-semibold">Confirm Logout</h3>
        <p class="text-base text-gray-600 mb-5">
          Are you sure you want to logout?
        </p>
        <div class="flex justify-center gap-4 flex-wrap">
          <button
            id="confirmLogout"
            class="py-3 px-5 border-none rounded text-sm font-medium cursor-pointer transition-opacity duration-300 bg-red-500 text-white hover:opacity-90"
          >
            Yes, Logout
          </button>
          <button
            id="cancelLogout"
            class="py-3 px-5 border-none rounded text-sm font-medium cursor-pointer transition-opacity duration-300 bg-gray-400 text-white hover:opacity-90"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <script>
      function toggleMobileMenu(menu) {
        menu.classList.toggle("open"); // toggles hamburger animation
        document.querySelector(".mobile-menu").classList.toggle("open"); // toggles mobile menu display
      }
      // Username form submission
      document
        .getElementById("usernameForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const newUsername = document.getElementById("newUsername").value;

          // In a real app, you would send this to your backend
          console.log("New username:", newUsername);

          // Show success message
          const successMsg = document.getElementById("usernameSuccess");
          successMsg.classList.remove("hidden");

          // Hide after 3 seconds
          setTimeout(() => {
            successMsg.classList.add("hidden");
          }, 3000);

          // Clear form
          this.reset();
        });

      // Password form submission
      document
        .getElementById("passwordForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const currentPassword =
            document.getElementById("currentPassword").value;
          const newPassword = document.getElementById("newPassword").value;
          const confirmPassword =
            document.getElementById("confirmPassword").value;

          // Simple validation
          if (newPassword !== confirmPassword) {
            alert("Passwords don't match!");
            return;
          }

          // In a real app, you would send this to your backend
          console.log("Password change requested");
          console.log("Current:", currentPassword);
          console.log("New:", newPassword);

          // Show success message
          const successMsg = document.getElementById("passwordSuccess");
          successMsg.classList.remove("hidden");

          // Hide after 3 seconds
          setTimeout(() => {
            successMsg.classList.add("hidden");
          }, 3000);

          // Clear form
          this.reset();
        });

      // Logout functionality
      const logoutBtn = document.getElementById("logoutBtn");
      const logoutModal = document.getElementById("logoutModal");
      const confirmLogout = document.getElementById("confirmLogout");
      const cancelLogout = document.getElementById("cancelLogout");

      logoutBtn.addEventListener("click", function () {
        logoutModal.classList.remove("hidden");
      });

      cancelLogout.addEventListener("click", function () {
        logoutModal.classList.add("hidden");
      });

      confirmLogout.addEventListener("click", function () {
        // In a real app, you would call your logout API
        console.log("User logged out");

        // Close modal
        logoutModal.classList.add("hidden");

        // Redirect to login page (index.html)
        window.location.href = "index.html";
      });

      // Close modal when clicking outside
      window.addEventListener("click", function (e) {
        if (e.target === logoutModal) {
          logoutModal.classList.add("hidden");
        }
      });

      document.querySelectorAll('a[href="#top"]').forEach((link) => {
        link.addEventListener("click", function (e) {
          const href = this.getAttribute("href");

          // Only handle links with an actual destination
          if (href && href !== "#") {
            e.preventDefault(); // stop default navigation

            // Smooth scroll to top
            window.scrollTo({ top: 0, behavior: "smooth" });

            // Then navigate after a slight delay (wait for scroll animation)
            setTimeout(() => {
              window.location.href = href;
            }, 600); // adjust this delay to match scroll speed
          }
        });
      });
    </script>
  </body>
</html>
