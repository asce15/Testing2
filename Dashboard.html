<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Barangay Market Area Health Information Hub</title>
    <link rel="stylesheet" href="./Dashboardtailwind.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="website icon" href="BMA.png" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body class="bg-gray-100 text-sm sm:text-base">
    <div class="flex min-h-screen">
      <!-- Responsive Sidebar -->
      <!-- Sidebar with full height -->
      <div
        id="sidebar"
        class="fixed inset-y-0 left-0 w-60 bg-gray-800 text-white flex-shrink-0 flex-col transform -translate-x-full md:relative md:translate-x-0 transition-transform duration-300 z-40"
      >
        <!-- Header -->
        <div
          class="flex items-center justify-between p-4 border-b border-gray-700"
        >
          <span class="ml-3.5 font-semibold text-xm sm:text-sl leading-tight">
            Brgy. Market Area<br />Health Information Hub
          </span>

          <!-- Sidebar close button (for mobile) -->
          <button
            id="closeSidebar"
            class="md:hidden text-white hover:text-gray-300"
          >
            <i class="fas fa-times text-lg"></i>
          </button>
        </div>

        <!-- Menu -->
        <div class="px-3 py-6 overflow-y-auto">
          <h3 class="text-xs uppercase tracking-wider mb-3">Management</h3>
          <ul class="space-y-2">
            <li>
              <a
                href="Dashboard.html"
                class="flex items-center p-2 font-bold bg-green-600 rounded-lg"
                ><i class="fas fa-home text-xs"></i
                ><span class="ml-2 text-sm">Dashboard</span></a
              >
            </li>
            <li>
              <a
                href="Appointment.html"
                class="flex items-center p-2 font-bold hover:bg-green-900 rounded-lg"
                ><i class="fas fa-calendar-alt text-xs"></i
                ><span class="ml-2 text-sm">Appointments</span></a
              >
            </li>
            <li>
              <a
                href="Medicine.html"
                class="flex items-center p-2 font-bold hover:bg-green-900 rounded-lg"
                ><i class="fas fa-pills text-xs"></i
                ><span class="ml-2 text-sm">Medicine</span></a
              >
            </li>
            <li>
              <a
                href="Resident.html"
                class="flex items-center p-2 font-bold hover:bg-green-900 rounded-lg"
                ><i class="fas fa-user text-xs"></i
                ><span class="ml-2 text-sm">Residents</span></a
              >
            </li>
            <li>
              <a
                href="Announcement.html"
                class="flex items-center p-2 font-bold hover:bg-green-900 rounded-lg"
                ><i class="fas fa-bullhorn text-xs"></i
                ><span class="ml-2 text-sm">Announcements</span></a
              >
            </li>
            <li>
              <a
                href="Settings.html"
                class="flex items-center p-2 font-bold hover:bg-green-900 rounded-lg"
                ><i class="fas fa-gear text-xs"></i
                ><span class="ml-2 text-sm">Settings</span></a
              >
            </li>
          </ul>
        </div>
      </div>

      <!-- Main Section -->
      <div class="flex flex-col h-screen w-full overflow-x-hidden">
        <!-- Top Bar - full width of the right side -->
        <div
          class="w-full bg-gradient-to-r from-gray-800 to-green-600 shadow p-3 sm:p-4 flex justify-between items-center"
        >
          <div class="flex items-center gap-2 sm:gap-3">
            <!-- Open sidebar button (mobile only) -->
            <button id="openSidebar" class="md:hidden text-white">
              <i class="fas fa-bars text-lg"></i>
            </button>

            <div
              class="w-12 h-12 sm:w-10 sm:h-10 flex items-center justify-center"
            >
              <img
                src="BMA.png"
                alt="Logo"
                class="w-full h-full object-contain rounded-full"
              />
            </div>
            <h1 class="text-base sm:text-xl font-bold text-white">Dashboard</h1>
          </div>
          <div class="text-white font-medium text-xs sm:text-base">
            <span id="realTimeClock"></span>
          </div>
        </div>
        <!-- Main Content -->
        <div class="p-6 overflow-y-auto flex-1">
          <!-- Stats Cards -->
          <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4">
            <!-- Appointments -->
            <div
              class="stat-card bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500 hover:shadow-lg"
            >
              <div class="flex justify-between items-start">
                <div>
                  <div class="flex items-center mb-2">
                    <i class="fas fa-calendar-alt text-orange-500 mr-2"></i>
                    <h3 class="text-gray-500 font-medium">Appointments</h3>
                  </div>
                  <p
                    class="text-3xl font-bold mt-2 text-gray-800"
                    id="admin-total-appointments"
                  >
                    24
                  </p>
                  <p class="text-green-500 text-sm mt-2">
                    <i class="fas fa-arrow-up mr-1"></i> 5% from last month
                  </p>
                </div>
              </div>
            </div>

            <!-- Total Medicine -->
            <div
              class="stat-card bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500 hover:shadow-lg"
            >
              <div class="flex justify-between items-start">
                <div>
                  <div class="flex items-center mb-2">
                    <i class="fas fa-pills text-green-500 mr-2"></i>
                    <h3 class="text-gray-500 font-medium">Total Medicines</h3>
                  </div>
                  <p
                    class="text-3xl font-bold mt-2 text-gray-800"
                    id="admin-total-medicines"
                  >
                    40
                  </p>
                  <p class="text-green-500 text-sm mt-2">
                    <i class="fas fa-arrow-up mr-1"></i> 8.3% from last month
                  </p>
                </div>
              </div>
            </div>

            <!-- Registered Accounts -->
            <div
              class="stat-card bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500 hover:shadow-lg"
            >
              <div class="flex justify-between items-start">
                <div>
                  <div class="flex items-center mb-2">
                    <i class="fas fa-users text-blue-500 mr-2"></i>
                    <h3 class="text-gray-500 font-medium">
                      Registered Accounts
                    </h3>
                  </div>
                  <p
                    class="text-3xl font-bold mt-2 text-gray-800"
                    id="admin-total-residents"
                  >
                    527
                  </p>
                  <p class="text-green-500 text-sm mt-2">
                    <i class="fas fa-arrow-up mr-1"></i> 26.9% from last month
                  </p>
                </div>
              </div>
            </div>

            <!--Announcement -->
            <div
              class="stat-card bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500 hover:shadow-lg"
            >
              <div class="flex justify-between items-start">
                <div>
                  <div class="flex items-center mb-2">
                    <i class="fas fa-bullhorn text-purple-500 mr-2"></i>
                    <h3 class="text-gray-500 font-medium">Announcements</h3>
                  </div>
                  <p class="text-3xl font-bold mt-2 text-gray-800">5</p>
                  <p class="text-green-500 text-sm mt-2">
                    <i class="fas fa-arrow-up mr-1"></i>2.3% posted this month
                  </p>
                </div>
                <!--<div class="bg-purple-100 p-3 rounded-full">
                                <i class="fas fa-user-md text-purple-500 text-xl"></i>
                            </div>-->
              </div>
            </div>
          </div>

          <!-- Charts Section -->
          <div class="bg-white rounded-xl shadow-md p-6 mb-8">
            <div
              class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6"
            >
              <h2 class="text-xl font-bold text-gray-800">
                <i class="fa-solid fa-chart-line"></i>
                Monthly Appointment
              </h2>
              <div class="w-full sm:w-auto">
                <select
                  class="w-full sm:w-auto bg-gray-100 text-gray-700 border-0 rounded-lg px-4 py-2"
                >
                  <option>Last 6 Months</option>
                  <option>Last 12 Months</option>
                  <option>This Year</option>
                  <option>Last Year</option>
                </select>
              </div>
            </div>

            <div class="overflow-x-auto">
              <div class="min-w-[800px] sm:min-w-full h-80">
                <canvas id="appointmentChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Recent Activity -->
          <div class="bg-white rounded-xl shadow-md p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-6">
              <i class="fa-solid fa-comment"></i>
              Recent Activity
            </h2>
            <div class="space-y-4">
              <div class="flex items-start">
                <div class="bg-blue-100 p-2 rounded-full mr-4">
                  <i class="fas fa-user-plus text-blue-500"></i>
                </div>
                <div>
                  <p class="font-medium">New patient registration</p>
                  <p class="text-gray-500 text-sm">
                    Daryl registered for a consultation
                  </p>
                  <p class="text-gray-400 text-xs mt-1">2 minutes ago</p>
                </div>
              </div>
              <div class="flex items-start">
                <div class="bg-green-100 p-2 rounded-full mr-4">
                  <i class="fas fa-pills text-green-500"></i>
                </div>
                <div>
                  <p class="font-medium">Medicine added to inventory</p>
                  <p class="text-gray-500 text-sm">
                    5 new medicines have been added
                  </p>
                  <p class="text-gray-400 text-xs mt-1">1 hour ago</p>
                </div>
              </div>
              <div class="flex items-start">
                <div class="bg-orange-100 p-2 rounded-full mr-4">
                  <i class="fas fa-calendar-check text-orange-500"></i>
                </div>
                <div>
                  <p class="font-medium">Appointment scheduled</p>
                  <p class="text-gray-500 text-sm">
                    France scheduled an appointment
                  </p>
                  <p class="text-gray-400 text-xs mt-1">3 hours ago</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Mobile menu toggle
        const openBtn = document.getElementById("mobile-menu-toggle");
        const closeBtn = document.getElementById("mobile-menu-close");

        openBtn?.addEventListener("click", function () {
          document.querySelector(".sidebar").classList.toggle("active");
        });

        closeBtn?.addEventListener("click", function () {
          document.querySelector(".sidebar").classList.remove("active");
        });

        // Chart initialization
        const ctx = document
          .getElementById("appointmentChart")
          .getContext("2d");
        const chart = new Chart(ctx, {
          type: "line",
          data: {
            labels: [
              "Jan",
              "Feb",
              "Mar",
              "Apr",
              "May",
              "Jun",
              "Jul",
              "Aug",
              "Sep",
              "Oct",
              "Nov",
              "Dec",
            ],
            datasets: [
              {
                label: "New Appointments",
                data: [
                  280, 320, 300, 380, 360, 450, 420, 390, 410, 440, 460, 480,
                ],
                backgroundColor: "rgba(37, 99, 235, 0.1)",
                borderColor: "rgba(37, 99, 235, 1)",
                borderWidth: 2,
                tension: 0.4,
                fill: true,
              },
              {
                label: "Accepted",
                data: [50, 70, 60, 80, 90, 100, 200, 250, 207, 211, 312, 300],
                backgroundColor: "rgba(16, 185, 129, 0.1)",
                borderColor: "rgba(16, 185, 129, 1)",
                borderWidth: 2,
                tension: 0.4,
                fill: true,
              },
              {
                label: "Cancelled",
                data: [20, 30, 20, 40, 30, 50, 20, 30, 20, 40, 30, 50],
                backgroundColor: "rgba(239, 68, 68, 0.1)",
                borderColor: "rgba(239, 68, 68, 1)",
                borderWidth: 2,
                tension: 0.4,
                fill: true,
                pointBackgroundColor: "rgba(239, 68, 68, 1)",
                pointRadius: 4,
                pointHoverRadius: 6,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  drawBorder: false,
                  color: "rgba(229, 231, 235, 0.5)",
                },
                ticks: {
                  stepSize: 100,
                },
              },
              x: {
                grid: {
                  display: false,
                  drawBorder: false,
                },
              },
            },
            plugins: {
              legend: {
                display: true, // Show the legend now
                position: "top",
                labels: {
                  font: {
                    family: "Poppins",
                    size: 12,
                  },
                },
              },
              tooltip: {
                backgroundColor: "rgba(0, 0, 0, 0.8)",
                titleFont: {
                  family: "Poppins",
                  size: 12,
                },
                bodyFont: {
                  family: "Poppins",
                  size: 12,
                },
                padding: 12,
                cornerRadius: 8,
                displayColors: true,
              },
            },
            interaction: {
              intersect: false,
              mode: "index",
            },
          },
        });

        // Responsive handling
        window.addEventListener("resize", function () {
          chart.resize();
        });
      });

      function updateDateTime() {
        const now = new Date();
        const options = {
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
          hour12: true,
        };
        document.getElementById("realTimeClock").textContent =
          now.toLocaleTimeString("en-US", options);
      }
      updateDateTime();
      setInterval(updateDateTime, 1000);

      const sidebar = document.getElementById("sidebar");
      const openSidebar = document.getElementById("openSidebar");
      const closeSidebar = document.getElementById("closeSidebar");

      openSidebar?.addEventListener("click", () => {
        sidebar.classList.remove("-translate-x-full");
      });

      closeSidebar?.addEventListener("click", () => {
        sidebar.classList.add("-translate-x-full");
      });

      console.log(
        "Admin dashboard reads:",
        localStorage.getItem("completedAppointments")
      );
    </script>
  </body>
</html>
