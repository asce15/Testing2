<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Barangay Market Area Health Information Hub</title>
    <link rel="stylesheet" href="./indextailwind.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>

  <body class="min-h-screen flex items-center justify-center p-4">
    <div class="wave"></div>
    <div class="wave"></div>
    <div class="wave"></div>
    <div
      class="max-w-xl w-full bg-white rounded-xl shadow-[0_10px_25px_rgba(0,0,0,0.35)] overflow-hidden transition-all duration-300 transform hover:scale-[1.02]"
    >
      <div
        class="bg-gradient-to-r from-[#6a7337] to-[#a8c66c] py-6 px-8 text-white flex flex-col items-center text-center"
      >
        <div
          class="h-20 w-20 mb-4 bg-white rounded-full flex items-center justify-center"
        >
          <img src="BMA.png" alt="BMA.png" />
        </div>
        <h1 class="text-3xl font-bold text-center">Barangay Market Area</h1>
        <p class="text-center text-white mt-2">
          Welcome to our community health portal. Please select your role to
          continue.
        </p>
      </div>

      <div class="p-8">
        <div class="flex flex-col space-y-4 mb-8">
          <button
            onclick="selectRole(event, 'citizen')"
            class="role-btn bg-white border-2 border-[#c1d682] hover:border-[#6A7337] text-[#8A9A5B] hover:text-[#4B5320] font-semibold py-4 px-6 rounded-lg flex items-center justify-start transition-all duration-200 hover:shadow-md hover:bg-gray-50"
          >
            <div
              class="bg-gray-200 w-12 h-12 rounded-full flex items-center justify-center mr-4"
            >
              <i class="fas fa-user text-[#6A7337] text-xl"></i>
            </div>
            <div class="text-left">
              <h3 class="font-bold text-lg">Citizen</h3>
              <p class="text-gray-500 text-xs sm:text-sm line-clamp-2">
                Access community services and information
              </p>
            </div>
            <i class="fas fa-chevron-right ml-auto text-[#6A7337]"></i>
          </button>

          <button
            onclick="selectRole(event, 'admin')"
            class="role-btn bg-white border-2 border-[#c1d682] hover:border-[#6A7337] text-[#8A9A5B] hover:text-[#4B5320] font-semibold py-4 px-6 rounded-lg flex items-center justify-start transition-all duration-200 hover:shadow-md hover:bg-gray-50"
          >
            <div
              class="bg-gray-200 w-12 h-12 rounded-full flex items-center justify-center mr-4"
            >
              <i class="fas fa-lock text-[#6A7337] text-xl"></i>
            </div>
            <div class="text-left">
              <h3 class="font-bold text-lg">
                <span class="sm:hidden">Admin</span>
                <span class="hidden sm:inline">Administrator</span>
              </h3>
              <p class="text-gray-500 text-xs sm:text-sm line-clamp-2">
                Manage system settings and user accounts
              </p>
            </div>
            <i class="fas fa-chevron-right ml-auto text-[#6A7337]"></i>
          </button>
        </div>
        <div class="mb-6">
          <label class="flex items-start">
            <div class="flex items-center h-5">
              <input
                id="terms"
                type="checkbox"
                class="focus:ring-[#6A7337] h-4 w-4 text-[#6A7337] border-gray-300 rounded"
              />
            </div>
            <div class="ml-3 text-sm">
              <span>I agree to the </span>
              <button
                onclick="showTerms()"
                class="text-[#6A7337] font-medium hover:underline focus:outline-none"
              >
                Terms and Conditions
              </button>
              <p class="text-gray-500 mt-1 italic">
                By checking this box, you acknowledge that you have read and
                accept our terms of service.
              </p>
            </div>
          </label>
        </div>

        <button
          id="continueBtn"
          onclick="redirectToLogin()"
          disabled
          class="w-full bg-gray-300 text-gray-500 font-bold py-3 px-4 rounded-lg transition-all duration-200 cursor-not-allowed"
        >
          Continue
          <i class="fas fa-arrow-right ml-2"></i>
        </button>
      </div>
    </div>

    <!-- Terms and Conditions Modal -->
    <div
      id="overlay"
      class="overlay hidden fixed inset-0 bg-black/70 z-40"
      onclick="hideTerms()"
    ></div>
    <div
      id="termsModal"
      class="modal hidden fixed inset-0 z-50 items-center justify-center p-4"
    >
      <div
        class="bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col overflow-hidden"
        onclick="event.stopPropagation()"
      >
        <!-- Header -->
        <div
          class="bg-gradient-to-r from-[#6a7337] to-[#a8c66c] px-8 py-4 flex justify-between items-center"
        >
          <h3 class="text-2xl font-bold text-white">Terms and Conditions</h3>
          <button
            onclick="hideTerms()"
            class="text-white hover:text-gray-200 transition-colors duration-200"
          >
            <i class="fas fa-times text-xl"></i>
          </button>
        </div>

        <!-- Body -->
        <div
          class="overflow-y-auto px-8 py-6 flex-1 text-gray-700 text-[1rem] leading-relaxed space-y-6"
        >
          <!-- Section -->
          <div>
            <h4
              class="text-xl font-semibold text-[#6A7337] border-b-2 border-[#8A9A5B] pb-1 mb-3"
            >
              1. Acceptance of Terms
            </h4>
            <p>
              By accessing and using this Community Portal, you accept and agree
              to be bound by the terms and provisions of this agreement. In
              addition, when using these particular services, you shall be
              subject to any posted guidelines or rules applicable to such
              services.
            </p>
          </div>

          <!-- Section -->
          <div>
            <h4
              class="text-xl font-semibold text-[#6A7337] border-b-2 border-[#8A9A5B] pb-1 mb-3"
            >
              2. Privacy Policy
            </h4>
            <p>
              Your privacy is very important to us. We designed our Privacy
              Policy to make important disclosures about how you can use our
              services to share with others and how we collect and can use your
              content and information.
            </p>
          </div>

          <!-- Section -->
          <div>
            <h4
              class="text-xl font-semibold text-[#6A7337] border-b-2 border-[#8A9A5B] pb-1 mb-3"
            >
              3. User Responsibilities
            </h4>
            <p>
              As a user of the portal, you agree to provide accurate information
              when registering and to keep this information updated. You are
              responsible for maintaining the confidentiality of your account
              and password.
            </p>
          </div>

          <!-- Section -->
          <div>
            <h4
              class="text-xl font-semibold text-[#6A7337] border-b-2 border-[#8A9A5B] pb-1 mb-3"
            >
              4. Prohibited Activities
            </h4>
            <p>
              You may not access or use the portal for any purpose other than
              that for which we make the portal available. Prohibited activities
              include harassing, abusing, or harming another person.
            </p>
          </div>

          <!-- Section -->
          <div>
            <h4
              class="text-xl font-semibold text-[#6A7337] border-b-2 border-[#8A9A5B] pb-1 mb-3"
            >
              5. Changes to Terms
            </h4>
            <p>
              We reserve the right to make changes to these terms at any time.
              Your continued use of the portal following the posting of changes
              will mean that you accept and agree to the changes.
            </p>
          </div>
        </div>

        <!-- Footer -->
        <div
          class="bg-gray-50 px-8 py-4 border-t border-gray-200 flex justify-end space-x-3"
        >
          <button
            onclick="hideTerms()"
            class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors duration-200"
          >
            Cancel
          </button>
          <button
            onclick="acceptTerms()"
            class="bg-[#6A7337] text-white font-semibold px-6 py-2 rounded-lg hover:bg-[#4B5320] transition-colors duration-200"
          >
            I Accept
          </button>
        </div>
      </div>
    </div>

    <script>
      let selectedRole = null;
      const termsCheckbox = document.getElementById("terms");
      const continueBtn = document.getElementById("continueBtn");
      const modal = document.getElementById("termsModal");
      const overlay = document.getElementById("overlay");

      function selectRole(event, role) {
        selectedRole = role;

        // Update UI to show selected role
        document.querySelectorAll(".role-btn").forEach((btn) => {
          btn.classList.remove("selected-role");
          btn.classList.add("border-[#c1d682]");
        });

        event.currentTarget.classList.remove("border-[#c1d682]");
        event.currentTarget.classList.add("selected-role");

        updateContinueButton();
      }

      function updateContinueButton() {
        if (selectedRole && termsCheckbox.checked) {
          continueBtn.disabled = false;
          continueBtn.classList.remove(
            "bg-gray-300",
            "text-gray-500",
            "cursor-not-allowed"
          );
          continueBtn.classList.add(
            "bg-[#6A7337]",
            "text-white",
            "hover:bg-[#4B5320]",
            "cursor-pointer"
          );
        } else {
          continueBtn.disabled = true;
          continueBtn.classList.add(
            "bg-gray-300",
            "text-gray-500",
            "cursor-not-allowed"
          );
          continueBtn.classList.remove(
            "bg-[#6A7337]",
            "text-white",
            "hover:bg-[#4B5320]",
            "cursor-pointer"
          );
        }
      }

      termsCheckbox.addEventListener("change", updateContinueButton);

      function showTerms() {
        modal.classList.remove("hidden");
        overlay.classList.remove("hidden");

        // Add enter animations
        modal.classList.add("flex");
        modal.classList.add("modal-enter");
        overlay.classList.add("overlay-enter");

        // Prevent body scroll
        document.body.style.overflow = "hidden";
      }

      function hideTerms() {
        // Add exit animations
        modal.classList.add("modal-exit");
        overlay.classList.add("overlay-exit");

        // Hide after animation completes
        setTimeout(() => {
          modal.classList.add("hidden");
          overlay.classList.add("hidden");
          modal.classList.remove("modal-enter", "modal-exit", "flex");
          overlay.classList.remove("overlay-enter", "overlay-exit");

          // Restore body scroll
          document.body.style.overflow = "";
        }, 300);
      }

      function acceptTerms() {
        termsCheckbox.checked = true;
        updateContinueButton();
        hideTerms();
      }

      // Close modal with Escape key
      document.addEventListener("keydown", function (event) {
        if (event.key === "Escape" && !modal.classList.contains("hidden")) {
          hideTerms();
        }
      });

      function redirectToLogin() {
        if (!selectedRole || !termsCheckbox.checked) return;

        // Show loading state
        continueBtn.innerHTML =
          '<i class="fas fa-spinner fa-spin mr-2"></i> Redirecting...';
        continueBtn.disabled = true;

        // Define the target pages
        const targetPages = {
          citizen: "CitizenLogin.html",
          admin: "AdminLogin.html",
        };

        const targetPage = targetPages[selectedRole];

        // Simulate redirect (replace with actual redirect in production)
        setTimeout(() => {
          try {
            window.location.href = targetPage;
          } catch (error) {
            console.error("Redirect failed:", error);
            alert(
              `Unable to redirect to ${targetPage}. Please ensure the file exists in the same directory.`
            );

            // Reset button state
            continueBtn.innerHTML =
              'Continue <i class="fas fa-arrow-right ml-2"></i>';
            updateContinueButton();
          }
        }, 1000);
      }

      document.addEventListener("click", function (e) {
        const isRoleBtn = e.target.closest(".role-btn");
        const isTermsCheckbox = e.target.closest("#terms");
        const isTermsLabel = e.target.closest("label");

        // Ignore clicks on terms checkbox or label
        if (isTermsCheckbox || isTermsLabel) return;

        // If click is NOT inside a role button, deselect all
        if (!isRoleBtn) {
          selectedRole = null;

          document.querySelectorAll(".role-btn").forEach((btn) => {
            btn.classList.remove("selected-role");
            btn.classList.add("border-[#c1d682]");
          });

          updateContinueButton();
        }
      });
    </script>
  </body>
</html>
